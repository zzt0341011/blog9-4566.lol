{{ if .Params.comments }}
<!-- Waline è¯„è®ºç³»ç»Ÿ -->
<div class="book-comments">
  <hr style="margin: 3rem 0 2rem 0; border: none; border-top: 1px solid var(--gray-200);">
  
  <h3 style="margin-bottom: 1.5rem; font-size: 1.5rem;">ğŸ’¬ ç•™è¨€åŒº</h3>
  
  <!-- å¼•å…¥ Waline æ ·å¼ -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/@waline/client@v3/dist/waline.css"
  />
  
  <!-- Waline å®¹å™¨ -->
  <div id="waline"></div>
  
  <!-- Waline åˆå§‹åŒ–è„šæœ¬ -->
  <script type="module">
    import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';
    
    init({
      el: '#waline',
      serverURL: 'https://waline1-pi.vercel.app/', // âš ï¸ å¿…é¡»æ›¿æ¢æˆä½ è‡ªå·±çš„åœ°å€ï¼
      lang: 'zh-CN',
      
      // ä¸­æ–‡ç•Œé¢é…ç½®
      locale: {
        placeholder: 'æ¬¢è¿ç•™è¨€ï¼Œè¯´ç‚¹ä»€ä¹ˆå§...',
        sofa: 'å¿«æ¥åšç¬¬ä¸€ä¸ªè¯„è®ºçš„äººå§~',
        submit: 'æäº¤',
        reply: 'å›å¤',
        cancelReply: 'å–æ¶ˆå›å¤',
        comment: 'è¯„è®º',
        refresh: 'åˆ·æ–°',
        more: 'åŠ è½½æ›´å¤š...',
        preview: 'é¢„è§ˆ',
        emoji: 'è¡¨æƒ…',
        uploadImage: 'ä¸Šä¼ å›¾ç‰‡',
        nick: 'æ˜µç§°',
        nickError: 'æ˜µç§°ä¸èƒ½å°‘äº3ä¸ªå­—ç¬¦',
        mail: 'é‚®ç®±',
        mailError: 'è¯·å¡«å†™æ­£ç¡®çš„é‚®ä»¶åœ°å€',
        link: 'ç½‘å€',
        optional: 'å¯é€‰',
        anonymous: 'åŒ¿å',
        login: 'ç™»å½•',
        logout: 'é€€å‡º',
        admin: 'ç®¡ç†å‘˜',
        word: 'å­—',
        wordHint: 'è¯„è®ºå­—æ•°åº”åœ¨ $0 åˆ° $1 å­—ä¹‹é—´ï¼\nå½“å‰å­—æ•°ï¼š$2',
        seconds: 'ç§’å‰',
        minutes: 'åˆ†é’Ÿå‰',
        hours: 'å°æ—¶å‰',
        days: 'å¤©å‰',
        now: 'åˆšåˆš',
      },
      
      // æ ¸å¿ƒé…ç½®
      login: 'disable',           // ç¦ç”¨ç™»å½•ï¼Œå…è®¸åŒ¿åè¯„è®º
      requiredMeta: ['nick'],     // åªè¦æ±‚å¡«å†™æ˜µç§°
      avatar: 'monsterid',        // å¤´åƒæ ·å¼
      avatarCDN: 'https://sdn.geekzu.org/avatar/', // ä½¿ç”¨å›½å†…å¤´åƒ CDN
      pageSize: 10,               // æ¯é¡µè¯„è®ºæ•°
      wordLimit: [0, 1000],       // è¯„è®ºå­—æ•°é™åˆ¶ 0-1000
      dark: 'auto',               // è‡ªåŠ¨é€‚é…æš—è‰²æ¨¡å¼
      
      // å¯é€‰åŠŸèƒ½ï¼ˆæ ¹æ®éœ€è¦å¼€å¯/å…³é—­ï¼‰
      imageUploader: false,       // ç¦ç”¨å›¾ç‰‡ä¸Šä¼ 
      highlighter: false,         // ç¦ç”¨ä»£ç é«˜äº®
      texRenderer: false,         // ç¦ç”¨æ•°å­¦å…¬å¼
      search: false,              // ç¦ç”¨æœç´¢è¡¨æƒ…åŠŸèƒ½
      
      // è¯„è®ºæ’åº
      commentSorting: 'latest',   // latest: æœ€æ–°ä¼˜å…ˆ, oldest: æœ€æ—©ä¼˜å…ˆ, hottest: æœ€çƒ­ä¼˜å…ˆ
    });
  </script>
</div>

<!-- è¯„è®ºåŒºæ ·å¼ä¼˜åŒ– -->
<style>
  .book-comments {
    margin-top: 3rem;
    padding-top: 0;
  }
  
  .book-comments h3 {
    margin-bottom: 1.5rem;
    font-size: 1.5rem;
    font-weight: 600;
  }
  
  #waline {
    margin-top: 1rem;
  }
  
  /* é€‚é… Hugo Book ä¸»é¢˜çš„æš—è‰²æ¨¡å¼ */
  @media (prefers-color-scheme: dark) {
    .book-comments hr {
      border-top-color: var(--gray-700) !important;
    }
  }
  
  /* è®©è¯„è®ºæ¡†æ›´ç¾è§‚ */
  .wl-editor {
    border-radius: 0.5rem;
  }
  
  .wl-btn {
    border-radius: 0.25rem;
  }
  
  /* å“åº”å¼ä¼˜åŒ– */
  @media (max-width: 768px) {
    .book-comments {
      margin-top: 2rem;
    }
    
    .book-comments h3 {
      font-size: 1.25rem;
    }
  }
</style>
{{ end }}